import{_ as e,c as t,a as l,b as i,d as n,e as o,w as p,r as c,o as r}from"./app-pFFYG-xA.js";const u={};function d(g,s){const a=c("RouteLink");return r(),t("div",null,[s[3]||(s[3]=l(`<h1 id="managing-translations" tabindex="-1"><a class="header-anchor" href="#managing-translations"><span>Managing Translations</span></a></h1><p>Beyond querying, most applications need to seed, update, clean up, and display translations in a predictable way. This guide covers the write APIs, soft delete workflow, pluralisation, and best practices for everyday use.</p><hr><h2 id="writing-translations" tabindex="-1"><a class="header-anchor" href="#writing-translations"><span>Writing translations</span></a></h2><h3 id="settranslation" tabindex="-1"><a class="header-anchor" href="#settranslation"><span><code>setTranslation()</code></span></a></h3><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token function">setTranslation</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ناونیشان&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ckb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>Restores soft-deleted rows automatically.</li><li>Invalidates per-model caches so subsequent reads pick up the new value.</li><li>Resets the <code>translations</code> relationship if it was eager loaded (so you don’t see stale data).</li></ul><h3 id="settranslations" tabindex="-1"><a class="header-anchor" href="#settranslations"><span><code>setTranslations()</code></span></a></h3><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token function">setTranslations</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;title&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;ناونیشان&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;content&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;ناوەڕۆک&#39;</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ckb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Updates multiple fields for a single locale.</li><li>Useful for form submissions where you save one locale at a time.</li></ul><h3 id="settranslationsbatch" tabindex="-1"><a class="header-anchor" href="#settranslationsbatch"><span><code>setTranslationsBatch()</code></span></a></h3><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token function">setTranslationsBatch</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;ckb&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;title&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;ناونیشانی نوێ&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;content&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;ناوەڕۆکی نوێ&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;ar&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span></span>
<span class="line">        <span class="token string single-quoted-string">&#39;title&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;عنوان جديد&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Accepts a map of locales to field/value pairs.</li><li>Restores soft-deleted rows and clears caches per update.</li><li>Pass <code>detachMissing: true</code> to remove translations not supplied for a given locale:</li></ul><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token function">setTranslationsBatch</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">    <span class="token string single-quoted-string">&#39;ckb&#39;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;title&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;ناونیشان&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token argument-name">detachMissing</span><span class="token punctuation">:</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>This is ideal for syncing translations from admin panels or import jobs.</p><hr><h2 id="reading-translations" tabindex="-1"><a class="header-anchor" href="#reading-translations"><span>Reading translations</span></a></h2><ul><li><code>translate($field, $locale)</code> – returns the translation or <code>null</code>.</li><li><code>translateOrOriginal($field, $locale = null)</code> – returns the translation, fallback locale, or original column.</li><li><code>getTranslations($locale)</code> – array keyed by field (<code>[&#39;title&#39; =&gt; &#39;...&#39;, &#39;content&#39; =&gt; &#39;...&#39;]</code>).</li><li><code>getAllTranslations()</code> – all locales keyed by locale (<code>[&#39;ckb&#39; =&gt; [...], &#39;ar&#39; =&gt; [...]]</code>).</li><li>Attribute access (<code>$post-&gt;title</code>) automatically follows the fallback chain (current locale → fallback locale → original).</li></ul><p>Need to check if a translation exists? Use <code>hasTranslation($field, $locale)</code>.</p><hr><h2 id="soft-delete-lifecycle" tabindex="-1"><a class="header-anchor" href="#soft-delete-lifecycle"><span>Soft delete lifecycle</span></a></h2><ul><li><code>deleteTranslation($field, $locale)</code> – soft deletes a single translation row.</li><li><code>deleteTranslations($locale)</code> – soft deletes every translation for the locale.</li><li><code>deleteTranslations()</code> – force deletes all translations for the model (used when the parent is deleted).</li></ul><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token function">deleteTranslation</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ckb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token function">setTranslation</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ناونیشان&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ckb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Restores row silently</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="pruning-soft-deleted-rows" tabindex="-1"><a class="header-anchor" href="#pruning-soft-deleted-rows"><span>Pruning soft-deleted rows</span></a></h3><p>Schedule a job to hard delete “stale” entries if your table grows quickly:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token class-name static-context">Translation</span><span class="token operator">::</span><span class="token function">onlyTrashed</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;deleted_at&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&lt;&#39;</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">subDays</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">forceDelete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="pluralisation-helpers" tabindex="-1"><a class="header-anchor" href="#pluralisation-helpers"><span>Pluralisation helpers</span></a></h2><p>The package supports Laravel’s choice syntax (<code>{0}</code>, <code>{1}</code>, <code>[2,*]</code>, etc.):</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token function">setTranslation</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;visits&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;{0}No visits|{1}One visit|[2,*]:count visits&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;en&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token function">translatePlural</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;visits&#39;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">// &quot;No visits&quot;</span></span>
<span class="line"><span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token function">translatePlural</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;visits&#39;</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;count&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &quot;5 visits&quot;</span></span>
<span class="line"><span class="token function">trans_model_choice</span><span class="token punctuation">(</span><span class="token variable">$post</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;visits&#39;</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;count&#39;</span> <span class="token operator">=&gt;</span> <span class="token number">12</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>When no plural text exists for the locale, helpers fall back to the original attribute.</p><hr><h2 id="attribute-guards-validation" tabindex="-1"><a class="header-anchor" href="#attribute-guards-validation"><span>Attribute guards &amp; validation</span></a></h2><ul><li>The trait throws <code>InvalidArgumentException</code> if you try to read or write a field not listed in <code>translatableFields</code>. Use this to your advantage—validate user input against that array to prevent typos.</li><li>When building forms, consider hydrating <code>getTranslations($locale)</code> into your view model so you can render all fields predictably.</li></ul><hr><h2 id="admin-ui-bulk-editing-tips" tabindex="-1"><a class="header-anchor" href="#admin-ui-bulk-editing-tips"><span>Admin UI &amp; bulk editing tips</span></a></h2><ul><li>Use <code>setTranslationsBatch()</code> behind bulk edit forms or APIs to minimise round-trips.</li><li>Reset caches after background jobs by calling <code>Post::resetTranslationCacheStore()</code> if you use a shared cache store (array caches reset automatically per request).</li><li>For table UIs, eager load the locales you intend to display via <code>withTranslations([&#39;ckb&#39;, &#39;ar&#39;])</code> to avoid per-row queries.</li></ul>`,37)),i("p",null,[s[1]||(s[1]=n("With day-to-day management nailed down, move to ",-1)),o(a,{to:"/guide/caching-performance.html"},{default:p(()=>[...s[0]||(s[0]=[n("Caching & Performance",-1)])]),_:1}),s[2]||(s[2]=n(" to ensure your translations stay fast at scale.",-1))])])}const h=e(u,[["render",d]]),m=JSON.parse('{"path":"/guide/managing-translations.html","title":"Managing Translations","lang":"en-US","frontmatter":{"title":"Managing Translations"},"git":{},"filePathRelative":"guide/managing-translations.md"}');export{h as comp,m as data};
