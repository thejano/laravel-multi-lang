import{_ as t,c as e,a as p,b as o,d as s,e as c,w as l,r as i,o as u}from"./app-Bbg022uk.js";const r={};function d(k,n){const a=i("RouteLink");return u(),e("div",null,[n[3]||(n[3]=p(`<h1 id="querying-translations" tabindex="-1"><a class="header-anchor" href="#querying-translations"><span>Querying Translations</span></a></h1><p>Laravel Multi-Lang mirrors Laravel’s query builder style so you can filter translated content with fluent, chainable scopes. This guide explains each scope, the arguments it accepts, and how to combine them.</p><hr><h2 id="scope-parameters" tabindex="-1"><a class="header-anchor" href="#scope-parameters"><span>Scope parameters</span></a></h2><p>Every scope follows the same signature:</p><table><thead><tr><th>Argument</th><th>Description</th></tr></thead><tbody><tr><td><code>field</code></td><td>Required translatable column (must exist in <code>$translatableFields</code>).</td></tr><tr><td><code>value</code></td><td>Value to compare against. Use arrays for <code>In/NotIn</code>. Omit for <code>Null/NotNull</code>.</td></tr><tr><td><code>operator</code></td><td>Optional comparison operator (<code>=</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>like</code>, <code>not like</code>, etc.). Defaults to <code>=</code>.</td></tr><tr><td><code>locale</code></td><td>Optional locale. Defaults to <code>App::getLocale()</code>. Pass <code>&#39;*&#39;</code> to target all locales at once.</td></tr><tr><td><code>fallbackLocale</code></td><td>Optional for fallback scopes—omit to use <code>config(&#39;app.fallback_locale&#39;)</code>.</td></tr><tr><td><code>includeOriginal</code></td><td>Determines whether the base attribute is evaluated in fallback scopes (default <code>true</code>).</td></tr></tbody></table><p>If you omit the operator, the scope assumes an equality comparison. Passing a locale last mirrors Laravel’s native <code>where</code> behaviour.</p><hr><h2 id="equality-comparison-scopes" tabindex="-1"><a class="header-anchor" href="#equality-comparison-scopes"><span>Equality &amp; comparison scopes</span></a></h2><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token comment">// Simple equality (uses current locale if omitted)</span></span>
<span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">whereTranslate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ناونیشان&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ckb&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">orWhereTranslate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ناونیشان&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Comparison operators</span></span>
<span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">whereTranslate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;published_at&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;&gt;=&#39;</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">subWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;en&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">whereTranslateNot</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;Draft&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;en&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Pattern matching</span></span>
<span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">whereTranslateLike</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;content&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;%Laravel%&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;en&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">whereTranslateLike</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;content&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;مقدمة%&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// default locale</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="array-scopes" tabindex="-1"><a class="header-anchor" href="#array-scopes"><span>Array scopes</span></a></h2><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">whereTranslateIn</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;Titre&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;Titre secondaire&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;fr&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">whereTranslateNotIn</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;Archived&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;Draft&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;en&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">orWhereTranslateNotIn</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;پێش نووسین&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ckb&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>These scopes accept any value supported by <code>whereIn</code>/<code>whereNotIn</code>, including subqueries.</p><hr><h2 id="null-scopes" tabindex="-1"><a class="header-anchor" href="#null-scopes"><span>Null scopes</span></a></h2><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">whereTranslateNull</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;summary&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ar&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// Missing or NULL translation</span></span>
<span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">whereTranslateNotNull</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;summary&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token comment">// Must exist in current locale</span></span>
<span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">orWhereTranslateNull</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;summary&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ckb&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="fallback-scopes" tabindex="-1"><a class="header-anchor" href="#fallback-scopes"><span>Fallback scopes</span></a></h2><p><code>whereTranslateWithFallback()</code> compares against multiple locales and (optionally) the original attribute in a single clause.</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token comment">// Check Kurdish → Arabic → original column (in that order)</span></span>
<span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">whereTranslateWithFallback</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;عنوان&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ckb&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ar&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Skip the original attribute</span></span>
<span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">whereTranslateWithFallback</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;Título&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;es&#39;</span><span class="token punctuation">,</span> <span class="token argument-name">fallbackLocale</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">&#39;pt&#39;</span><span class="token punctuation">,</span> <span class="token argument-name">includeOriginal</span><span class="token punctuation">:</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// OR variant</span></span>
<span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">orWhereTranslateWithFallback</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;excerpt&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;خلاصة&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ar&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="grouped-predicates" tabindex="-1"><a class="header-anchor" href="#grouped-predicates"><span>Grouped predicates</span></a></h2><p>For complex combinations, wrap translation clauses with <code>whereTranslateGroup()</code>:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">whereTranslateGroup</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$group</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token variable">$group</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ناونیشان&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ckb&#39;</span><span class="token punctuation">)</span></span>
<span class="line">          <span class="token operator">-&gt;</span><span class="token function">whereLike</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;content&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;%Laravel%&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;ckb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">orWhere</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;status&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;draft&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Inside the group you can call any of:</p><ul><li><code>where</code>, <code>orWhere</code></li><li><code>whereNot</code>, <code>orWhereNot</code></li><li><code>whereLike</code>, <code>orWhereLike</code></li><li><code>whereIn</code>, <code>orWhereIn</code></li><li><code>whereNotIn</code>, <code>orWhereNotIn</code></li><li><code>whereNull</code>, <code>orWhereNull</code></li><li><code>whereNotNull</code>, <code>orWhereNotNull</code></li><li><code>whereWithFallback</code>, <code>orWhereWithFallback</code></li></ul><p>The group keeps your translation logic encapsulated, making the surrounding query easier to read.</p><hr><h2 id="wildcard-locales" tabindex="-1"><a class="header-anchor" href="#wildcard-locales"><span>Wildcard locales</span></a></h2><p>Pass <code>&#39;*&#39;</code> as the locale to evaluate the clause across all available translations:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token comment">// Finds posts that have &quot;Laravel&quot; in any locale</span></span>
<span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">whereTranslateLike</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;content&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;%Laravel%&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;*&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Exclude posts where any translation equals &quot;Draft&quot;</span></span>
<span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">whereTranslateNot</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;Draft&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;*&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="combining-with-standard-conditions" tabindex="-1"><a class="header-anchor" href="#combining-with-standard-conditions"><span>Combining with standard conditions</span></a></h2><p>Scopes return an <code>Illuminate\\Database\\Eloquent\\Builder</code> instance, so you can chain them with native query builder calls:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;status&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;published&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">whereTranslate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;!=&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;Archived&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;en&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">whereBetween</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;published_at&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">subMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;published_at&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;desc&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">paginate</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="tips-for-repositories-services" tabindex="-1"><a class="header-anchor" href="#tips-for-repositories-services"><span>Tips for repositories &amp; services</span></a></h2><ul><li><strong>Validate fields up front</strong>: keep a constant array of translatable columns and assert membership before building dynamic queries.</li><li><strong>Expose read models</strong>: when building filters from HTTP query strings, map “friendly” parameters to the scopes above.</li><li><strong>Fallback aware search</strong>: combine fallback scopes with <code>&#39;*&#39;</code> locales to offer “search anywhere” experiences without hitting the database more than once.</li></ul>`,39)),o("p",null,[n[1]||(n[1]=s("Once you’re comfortable querying, continue to ",-1)),c(a,{to:"/guide/managing-translations.html"},{default:l(()=>[...n[0]||(n[0]=[s("Managing Translations",-1)])]),_:1}),n[2]||(n[2]=s(" to learn about batch updates, soft deletes, and pluralisation helpers.",-1))])])}const h=t(r,[["render",d]]),m=JSON.parse('{"path":"/guide/querying.html","title":"Querying Translations","lang":"en-US","frontmatter":{"title":"Querying Translations"},"git":{"updatedTime":1762818033000,"contributors":[{"name":"Pshtiwan Mahmood","username":"","email":"kardoey@gmail.com","commits":1}],"changelog":[{"hash":"6f1865987fc5bf0bd26664c58f95973ad57c7533","time":1762818033000,"email":"kardoey@gmail.com","author":"Pshtiwan Mahmood","message":"2nd Version"}]},"filePathRelative":"guide/querying.md"}');export{h as comp,m as data};
