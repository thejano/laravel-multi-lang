import{_ as l,c as i,a as e,b as t,d as s,e as p,w as o,r as c,o as r}from"./app-Bbg022uk.js";const u={};function d(k,n){const a=c("RouteLink");return r(),i("div",null,[n[6]||(n[6]=e(`<h1 id="extensibility-integrations" tabindex="-1"><a class="header-anchor" href="#extensibility-integrations"><span>Extensibility &amp; Integrations</span></a></h1><p>Laravel Multi-Lang is designed to bend without breaking. This guide shows you how to extend the package—custom cache stores, fallback chains, middleware integration, and observability hooks.</p><hr><h2 id="custom-cache-stores" tabindex="-1"><a class="header-anchor" href="#custom-cache-stores"><span>Custom cache stores</span></a></h2><p>Implement the <code>TranslationCacheStore</code> contract when you need more control than the built-in array/Redis stores:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\\</span>Database<span class="token punctuation">\\</span>Eloquent<span class="token punctuation">\\</span>Model</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">use</span> <span class="token package">TheJano<span class="token punctuation">\\</span>MultiLang<span class="token punctuation">\\</span>Contracts<span class="token punctuation">\\</span>TranslationCacheStore</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name-definition class-name">DynamoTranslationCacheStore</span> <span class="token keyword">implements</span> <span class="token class-name">TranslationCacheStore</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">get</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Model</span> <span class="token variable">$model</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token operator">?</span><span class="token keyword return-type">array</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// Retrieve translation payload from DynamoDB (or other service)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">put</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Model</span> <span class="token variable">$model</span><span class="token punctuation">,</span> <span class="token keyword type-hint">array</span> <span class="token variable">$payload</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// Persist payload</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">forget</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Model</span> <span class="token variable">$model</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// Delete payload</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Register at runtime:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token class-name static-context">Post</span><span class="token operator">::</span><span class="token function">setTranslationCacheStore</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DynamoTranslationCacheStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Reset to the default behaviour with <code>Post::resetTranslationCacheStore()</code>.</p><hr><h2 id="fallback-strategies" tabindex="-1"><a class="header-anchor" href="#fallback-strategies"><span>Fallback strategies</span></a></h2><p><code>translateOrOriginal()</code> uses Laravel’s fallback locale automatically, but you might need bespoke chains:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token variable">$preferredLocales</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;fr-CA&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;fr&#39;</span><span class="token punctuation">,</span> <span class="token function">config</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;app.fallback_locale&#39;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token variable">$translation</span> <span class="token operator">=</span> <span class="token function">collect</span><span class="token punctuation">(</span><span class="token variable">$preferredLocales</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token variable">$locale</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token variable">$locale</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">-&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">filled</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token operator">??</span> <span class="token variable">$post</span><span class="token operator">-&gt;</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The same pattern works with <code>whereTranslateWithFallback()</code>—just pass the locales in the order you want them evaluated.</p><hr><h2 id="middleware-integration" tabindex="-1"><a class="header-anchor" href="#middleware-integration"><span>Middleware integration</span></a></h2>`,16)),t("p",null,[n[1]||(n[1]=s("See the dedicated ",-1)),p(a,{to:"/guide/middleware.html"},{default:o(()=>[...n[0]||(n[0]=[s("Locale Middleware",-1)])]),_:1}),n[2]||(n[2]=s(" guide for setup instructions, routing patterns, and examples.",-1))]),n[7]||(n[7]=e(`<hr><h2 id="translationscopegroup-in-custom-builders" tabindex="-1"><a class="header-anchor" href="#translationscopegroup-in-custom-builders"><span>TranslationScopeGroup in custom builders</span></a></h2><p>Need reusable translation filters across repositories or service layers? Wrap logic into dedicated scope groups:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token keyword">class</span> <span class="token class-name-definition class-name">PostFilters</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">headlineMatch</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Builder</span> <span class="token variable">$query</span><span class="token punctuation">,</span> <span class="token keyword type-hint">string</span> <span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token keyword type-hint">string</span> <span class="token variable">$locale</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Builder</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-&gt;</span><span class="token function">whereTranslateGroup</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$group</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$locale</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token variable">$group</span><span class="token operator">-&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$locale</span><span class="token punctuation">)</span></span>
<span class="line">                  <span class="token operator">-&gt;</span><span class="token function">orWhereWithFallback</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;title&#39;</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$locale</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Call <code>PostFilters::headlineMatch(Post::query(), &#39;ناونیشان&#39;, &#39;ckb&#39;)</code> wherever needed.</p><hr><h2 id="observability-events" tabindex="-1"><a class="header-anchor" href="#observability-events"><span>Observability &amp; events</span></a></h2><p>Translations are standard Eloquent models, so you can tap into lifecycle events:</p><div class="language-php line-numbers-mode" data-highlighter="prismjs" data-ext="php"><pre><code class="language-php"><span class="line"><span class="token keyword">use</span> <span class="token package">TheJano<span class="token punctuation">\\</span>MultiLang<span class="token punctuation">\\</span>Models<span class="token punctuation">\\</span>Translation</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name static-context">Translation</span><span class="token operator">::</span><span class="token function">saved</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$translation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name static-context">Cache</span><span class="token operator">::</span><span class="token function">tags</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;translations&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name static-context">Translation</span><span class="token operator">::</span><span class="token function">deleted</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$translation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">activity</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token operator">-&gt;</span><span class="token function">performedOn</span><span class="token punctuation">(</span><span class="token variable">$translation</span><span class="token operator">-&gt;</span><span class="token property">translatable</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token operator">-&gt;</span><span class="token function">event</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;translation_deleted&#39;</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token operator">-&gt;</span><span class="token function">withProperties</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">            <span class="token string single-quoted-string">&#39;locale&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$translation</span><span class="token operator">-&gt;</span><span class="token property">locale</span><span class="token punctuation">,</span></span>
<span class="line">            <span class="token string single-quoted-string">&#39;field&#39;</span>  <span class="token operator">=&gt;</span> <span class="token variable">$translation</span><span class="token operator">-&gt;</span><span class="token property">field</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Translation removed.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Consider broadcasting events or dispatching jobs to invalidate CDN caches, send Slack notifications, or trigger automatic re-translations.</p><hr><h2 id="integrating-external-translation-services" tabindex="-1"><a class="header-anchor" href="#integrating-external-translation-services"><span>Integrating external translation services</span></a></h2><ol><li><strong>Export</strong> untranslated strings with <code>multi-lang:export --missing</code>.</li><li><strong>Push</strong> the JSON payload to your translation vendor (S3, Phrase, Lokalise, Smartling, etc.).</li><li><strong>Import</strong> translated content with <code>multi-lang:import --strategy=merge</code> or <code>--strategy=replace</code>.</li><li><strong>Prime caches</strong> (optional) by eager loading translations post-import.</li></ol><p>Wrap export/import commands in queued jobs or scheduled tasks to automate round-trips.</p><hr><h2 id="building-admin-interfaces" tabindex="-1"><a class="header-anchor" href="#building-admin-interfaces"><span>Building admin interfaces</span></a></h2><ul><li>Use <code>setTranslationsBatch()</code> behind forms to write multiple locales in one request.</li><li>Present translations using <code>getTranslations($locale)</code> to keep form inputs predictable.</li><li>Provide bulk actions that call <code>deleteTranslations($locale)</code> before re-importing clean content.</li><li>Combine translation scope groups with standard filters to power advanced search screens.</li></ul>`,17)),t("p",null,[n[4]||(n[4]=s("With extensibility covered, move on to ",-1)),p(a,{to:"/guide/testing.html"},{default:o(()=>[...n[3]||(n[3]=[s("Testing & QA",-1)])]),_:1}),n[5]||(n[5]=s(" to keep localisation behaviour reliable in your CI pipeline.",-1))])])}const m=l(u,[["render",d]]),g=JSON.parse('{"path":"/guide/extensibility.html","title":"Extensibility & Integrations","lang":"en-US","frontmatter":{"title":"Extensibility & Integrations"},"git":{"updatedTime":1762818033000,"contributors":[{"name":"Pshtiwan Mahmood","username":"","email":"kardoey@gmail.com","commits":1}],"changelog":[{"hash":"6f1865987fc5bf0bd26664c58f95973ad57c7533","time":1762818033000,"email":"kardoey@gmail.com","author":"Pshtiwan Mahmood","message":"2nd Version"}]},"filePathRelative":"guide/extensibility.md"}');export{m as comp,g as data};
